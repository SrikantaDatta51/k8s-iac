{
    "__inputs": [],
    "__requires": [
        {
            "type": "grafana",
            "id": "grafana",
            "name": "Grafana",
            "version": "9.0.0"
        },
        {
            "type": "datasource",
            "id": "prometheus",
            "name": "Prometheus",
            "version": "1.0.0"
        }
    ],
    "id": null,
    "uid": "bmaas-01-gpu-health",
    "title": "BMaaS \u2014 01 GPU Health & Diagnostics",
    "description": "Per-GPU deep-dive: DCGM health matrix, ECC SBE/DBE, row remapping, temperature (core+HBM), power/throttle, clock/perfstate, NVLink errors.",
    "tags": [
        "bmaas",
        "gpu",
        "health",
        "diagnostics",
        "ecc",
        "nvlink",
        "b200",
        "bcm11"
    ],
    "style": "dark",
    "timezone": "browser",
    "editable": true,
    "graphTooltip": 1,
    "fiscalYearStartMonth": 0,
    "liveNow": false,
    "refresh": "30s",
    "schemaVersion": 38,
    "version": 1,
    "time": {
        "from": "now-6h",
        "to": "now"
    },
    "timepicker": {},
    "annotations": {
        "list": [
            {
                "builtIn": 1,
                "datasource": {
                    "type": "grafana",
                    "uid": "-- Grafana --"
                },
                "enable": true,
                "hide": true,
                "iconColor": "rgba(0, 211, 255, 1)",
                "name": "Annotations & Alerts",
                "type": "dashboard"
            }
        ]
    },
    "templating": {
        "list": [
            {
                "name": "datasource",
                "type": "datasource",
                "label": "Data Source",
                "query": "prometheus",
                "current": {
                    "text": "Mimir BCM Metrics",
                    "value": "Mimir BCM Metrics"
                },
                "hide": 0,
                "includeAll": false,
                "multi": false,
                "options": [],
                "refresh": 1,
                "regex": "",
                "skipUrlSync": false
            },
            {
                "name": "cluster",
                "type": "query",
                "label": "Cluster",
                "datasource": {
                    "type": "prometheus",
                    "uid": "${datasource}"
                },
                "definition": "label_values(up, cluster)",
                "query": {
                    "query": "label_values(up, cluster)",
                    "refId": "cl"
                },
                "current": {
                    "text": "su56",
                    "value": "su56"
                },
                "hide": 0,
                "includeAll": false,
                "multi": false,
                "options": [],
                "refresh": 2,
                "regex": "",
                "sort": 1,
                "skipUrlSync": false
            },
            {
                "name": "node",
                "type": "query",
                "label": "Node (DGX)",
                "datasource": {
                    "type": "prometheus",
                    "uid": "${datasource}"
                },
                "definition": "label_values({cluster=~\"$cluster\"}, entity)",
                "query": {
                    "query": "label_values({cluster=~\"$cluster\"}, entity)",
                    "refId": "nd"
                },
                "current": {},
                "hide": 0,
                "includeAll": true,
                "multi": true,
                "allValue": "skt-dgx.*",
                "options": [],
                "refresh": 2,
                "regex": "/skt-dgx.*/",
                "sort": 1,
                "skipUrlSync": false
            }
        ]
    },
    "panels": [
        {
            "type": "row",
            "title": "GPU Health Overview",
            "collapsed": false,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 0
            },
            "id": 1,
            "panels": []
        },
        {
            "id": 2,
            "title": "GPU Health Matrix (per Node)",
            "description": "WHY: Instantly visualize which nodes have GPU health issues.\n\nMETRIC: gpu_health_overall \u2014 DCGM aggregate health check.\n0 = PASS (green), > 0 = FAIL (red). Each row = one DGX node.\nSIGNIFICANCE: Failed nodes should NOT receive new workloads.\nACTION: Filter by specific node using the dropdown to drill down.",
            "type": "state-timeline",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 8,
                "w": 12,
                "x": 0,
                "y": 1
            },
            "fieldConfig": {
                "defaults": {
                    "custom": {
                        "lineWidth": 0,
                        "fillOpacity": 80
                    },
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "#56A64B",
                                "value": null
                            },
                            {
                                "color": "#E0A939",
                                "value": 1
                            },
                            {
                                "color": "#C04040",
                                "value": 2
                            },
                            {
                                "color": "#8F8F8F",
                                "value": 3
                            }
                        ]
                    },
                    "mappings": [
                        {
                            "type": "value",
                            "options": {
                                "0": {
                                    "text": "PASS",
                                    "color": "#56A64B"
                                }
                            }
                        },
                        {
                            "type": "value",
                            "options": {
                                "1": {
                                    "text": "WARN",
                                    "color": "#E0A939"
                                }
                            }
                        },
                        {
                            "type": "value",
                            "options": {
                                "2": {
                                    "text": "FAIL",
                                    "color": "#C04040"
                                }
                            }
                        },
                        {
                            "type": "value",
                            "options": {
                                "3": {
                                    "text": "UNK",
                                    "color": "#8F8F8F"
                                }
                            }
                        }
                    ]
                },
                "overrides": []
            },
            "options": {
                "showValue": "auto",
                "mergeValues": true,
                "alignValue": "center",
                "rowHeight": 0.85,
                "tooltip": {
                    "mode": "multi"
                },
                "legend": {
                    "displayMode": "list",
                    "placement": "bottom"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_health_overall{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}}"
                }
            ]
        },
        {
            "id": 3,
            "title": "GPUs per Entity",
            "description": "WHY: Validate hardware config \u2014 B200 DGX should have 8 GPUs.\n\nMETRIC: gpu_count \u2014 GPUs detected by DCGM per entity.\nSIGNIFICANCE: < 8 = GPU not detected = hardware failure.\nACTION: Check GPU seating, PCIe link, DCGM logs.",
            "type": "bargauge",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 8,
                "w": 6,
                "x": 12,
                "y": 1
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "none",
                    "decimals": 0,
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "#C04040",
                                "value": null
                            },
                            {
                                "color": "#E0A939",
                                "value": 7
                            },
                            {
                                "color": "#56A64B",
                                "value": 8
                            }
                        ]
                    },
                    "noValue": "N/A"
                },
                "overrides": []
            },
            "options": {
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "orientation": "horizontal",
                "displayMode": "gradient",
                "showUnfilled": true
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_count{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}}",
                    "instant": true
                }
            ]
        },
        {
            "id": 4,
            "title": "Nodes Needing GPU RMA",
            "description": "WHY: Proactive RMA tracking to minimize downtime.\n\nCRITERIA: gpu_ecc_dbe_agg > 0 (uncorrectable memory) OR gpu_row_remap_failure == 1 (HBM repair exhausted) OR gpu_uncorrectable_remapped_rows > 0.\n\nACTION: Any > 0 = open RMA ticket with NVIDIA.",
            "type": "stat",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 4,
                "w": 6,
                "x": 18,
                "y": 1
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "none",
                    "decimals": 0,
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "#56A64B",
                                "value": null
                            },
                            {
                                "color": "#C04040",
                                "value": 1
                            }
                        ]
                    },
                    "mappings": [],
                    "noValue": "N/A"
                },
                "overrides": []
            },
            "options": {
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "orientation": "auto",
                "textMode": "value",
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "center"
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "count((gpu_ecc_dbe_agg{entity=~\"$node\",cluster=~\"$cluster\"} > 0) or (gpu_row_remap_failure{entity=~\"$node\",cluster=~\"$cluster\"} == 1) or (gpu_uncorrectable_remapped_rows{entity=~\"$node\",cluster=~\"$cluster\"} > 0)) or vector(0)",
                    "legendFormat": "RMA Candidates",
                    "instant": true
                }
            ]
        },
        {
            "id": 5,
            "title": "Memory",
            "description": "WHY: Detects HBM memory faults \u2014 ECC errors, row remapping issues.\n0 = OK, > 0 = memory degrading.",
            "type": "stat",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 4,
                "w": 2,
                "x": 12,
                "y": 5
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "none",
                    "decimals": 0,
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "#56A64B",
                                "value": null
                            },
                            {
                                "color": "#C04040",
                                "value": 1
                            }
                        ]
                    },
                    "mappings": [
                        {
                            "type": "value",
                            "options": {
                                "-1": {
                                    "text": "N/A",
                                    "color": "#8F8F8F"
                                }
                            }
                        },
                        {
                            "type": "value",
                            "options": {
                                "0": {
                                    "text": "OK",
                                    "color": "#56A64B"
                                }
                            }
                        },
                        {
                            "type": "range",
                            "options": {
                                "from": 1,
                                "to": 999,
                                "result": {
                                    "text": "FAIL",
                                    "color": "#C04040"
                                }
                            }
                        }
                    ],
                    "noValue": "N/A"
                },
                "overrides": []
            },
            "options": {
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "orientation": "auto",
                "textMode": "value",
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "center"
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "max(gpu_health_mem{entity=~\"$node\",cluster=~\"$cluster\"}) or vector(-1)",
                    "legendFormat": "",
                    "instant": true
                }
            ]
        },
        {
            "id": 6,
            "title": "NVLink",
            "description": "WHY: NVLink enables 900GB/s GPU-to-GPU communication.\n0 = OK, > 0 = link errors detected.",
            "type": "stat",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 4,
                "w": 2,
                "x": 14,
                "y": 5
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "none",
                    "decimals": 0,
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "#56A64B",
                                "value": null
                            },
                            {
                                "color": "#C04040",
                                "value": 1
                            }
                        ]
                    },
                    "mappings": [
                        {
                            "type": "value",
                            "options": {
                                "-1": {
                                    "text": "N/A",
                                    "color": "#8F8F8F"
                                }
                            }
                        },
                        {
                            "type": "value",
                            "options": {
                                "0": {
                                    "text": "OK",
                                    "color": "#56A64B"
                                }
                            }
                        },
                        {
                            "type": "range",
                            "options": {
                                "from": 1,
                                "to": 999,
                                "result": {
                                    "text": "FAIL",
                                    "color": "#C04040"
                                }
                            }
                        }
                    ],
                    "noValue": "N/A"
                },
                "overrides": []
            },
            "options": {
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "orientation": "auto",
                "textMode": "value",
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "center"
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "max(gpu_health_nvlink{entity=~\"$node\",cluster=~\"$cluster\"}) or vector(-1)",
                    "legendFormat": "",
                    "instant": true
                }
            ]
        },
        {
            "id": 7,
            "title": "PCIe",
            "description": "WHY: PCIe connects GPU to CPU for data transfer.\n0 = OK, > 0 = bus errors.",
            "type": "stat",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 4,
                "w": 2,
                "x": 16,
                "y": 5
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "none",
                    "decimals": 0,
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "#56A64B",
                                "value": null
                            },
                            {
                                "color": "#C04040",
                                "value": 1
                            }
                        ]
                    },
                    "mappings": [
                        {
                            "type": "value",
                            "options": {
                                "-1": {
                                    "text": "N/A",
                                    "color": "#8F8F8F"
                                }
                            }
                        },
                        {
                            "type": "value",
                            "options": {
                                "0": {
                                    "text": "OK",
                                    "color": "#56A64B"
                                }
                            }
                        },
                        {
                            "type": "range",
                            "options": {
                                "from": 1,
                                "to": 999,
                                "result": {
                                    "text": "FAIL",
                                    "color": "#C04040"
                                }
                            }
                        }
                    ],
                    "noValue": "N/A"
                },
                "overrides": []
            },
            "options": {
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "orientation": "auto",
                "textMode": "value",
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "center"
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "max(gpu_health_pcie{entity=~\"$node\",cluster=~\"$cluster\"}) or vector(-1)",
                    "legendFormat": "",
                    "instant": true
                }
            ]
        },
        {
            "id": 8,
            "title": "SM",
            "description": "WHY: Streaming Multiprocessors are the GPU compute units.\n0 = OK, > 0 = compute errors.",
            "type": "stat",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 4,
                "w": 2,
                "x": 18,
                "y": 5
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "none",
                    "decimals": 0,
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "#56A64B",
                                "value": null
                            },
                            {
                                "color": "#C04040",
                                "value": 1
                            }
                        ]
                    },
                    "mappings": [
                        {
                            "type": "value",
                            "options": {
                                "-1": {
                                    "text": "N/A",
                                    "color": "#8F8F8F"
                                }
                            }
                        },
                        {
                            "type": "value",
                            "options": {
                                "0": {
                                    "text": "OK",
                                    "color": "#56A64B"
                                }
                            }
                        },
                        {
                            "type": "range",
                            "options": {
                                "from": 1,
                                "to": 999,
                                "result": {
                                    "text": "FAIL",
                                    "color": "#C04040"
                                }
                            }
                        }
                    ],
                    "noValue": "N/A"
                },
                "overrides": []
            },
            "options": {
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "orientation": "auto",
                "textMode": "value",
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "center"
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "max(gpu_health_sm{entity=~\"$node\",cluster=~\"$cluster\"}) or vector(-1)",
                    "legendFormat": "",
                    "instant": true
                }
            ]
        },
        {
            "id": 9,
            "title": "Thermal",
            "description": "WHY: GPU operating within thermal limits.\n0 = OK, > 0 = overheating.",
            "type": "stat",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 4,
                "w": 2,
                "x": 20,
                "y": 5
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "none",
                    "decimals": 0,
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "#56A64B",
                                "value": null
                            },
                            {
                                "color": "#C04040",
                                "value": 1
                            }
                        ]
                    },
                    "mappings": [
                        {
                            "type": "value",
                            "options": {
                                "-1": {
                                    "text": "N/A",
                                    "color": "#8F8F8F"
                                }
                            }
                        },
                        {
                            "type": "value",
                            "options": {
                                "0": {
                                    "text": "OK",
                                    "color": "#56A64B"
                                }
                            }
                        },
                        {
                            "type": "range",
                            "options": {
                                "from": 1,
                                "to": 999,
                                "result": {
                                    "text": "FAIL",
                                    "color": "#C04040"
                                }
                            }
                        }
                    ],
                    "noValue": "N/A"
                },
                "overrides": []
            },
            "options": {
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "orientation": "auto",
                "textMode": "value",
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "center"
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "max(gpu_health_thermal{entity=~\"$node\",cluster=~\"$cluster\"}) or vector(-1)",
                    "legendFormat": "",
                    "instant": true
                }
            ]
        },
        {
            "id": 10,
            "title": "Overall",
            "description": "WHY: DCGM composite health \u2014 OR of all sub-checks.\n0 = ALL healthy, > 0 = investigate.",
            "type": "stat",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 4,
                "w": 2,
                "x": 22,
                "y": 5
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "none",
                    "decimals": 0,
                    "thresholds": {
                        "mode": "absolute",
                        "steps": [
                            {
                                "color": "#56A64B",
                                "value": null
                            },
                            {
                                "color": "#C04040",
                                "value": 1
                            }
                        ]
                    },
                    "mappings": [
                        {
                            "type": "value",
                            "options": {
                                "-1": {
                                    "text": "N/A",
                                    "color": "#8F8F8F"
                                }
                            }
                        },
                        {
                            "type": "value",
                            "options": {
                                "0": {
                                    "text": "OK",
                                    "color": "#56A64B"
                                }
                            }
                        },
                        {
                            "type": "range",
                            "options": {
                                "from": 1,
                                "to": 999,
                                "result": {
                                    "text": "FAIL",
                                    "color": "#C04040"
                                }
                            }
                        }
                    ],
                    "noValue": "N/A"
                },
                "overrides": []
            },
            "options": {
                "reduceOptions": {
                    "calcs": [
                        "lastNotNull"
                    ],
                    "fields": "",
                    "values": false
                },
                "orientation": "auto",
                "textMode": "value",
                "colorMode": "background",
                "graphMode": "none",
                "justifyMode": "center"
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "max(gpu_health_overall{entity=~\"$node\",cluster=~\"$cluster\"}) or vector(-1)",
                    "legendFormat": "",
                    "instant": true
                }
            ]
        },
        {
            "type": "row",
            "title": "ECC Error Tracking",
            "collapsed": false,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 9
            },
            "id": 11,
            "panels": []
        },
        {
            "id": 12,
            "title": "ECC Single-Bit Errors (Aggregate)",
            "description": "WHY: SBE are correctable \u2014 the GPU auto-corrects them.\nRising trend = HBM memory slowly degrading.\n\nMETRIC: gpu_ecc_sbe_agg \u2014 lifetime correctable error count.\nACTION: Monitor rate. Rapid increase \u2192 schedule maintenance window.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 8,
                "x": 0,
                "y": 10
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "SBE Count",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "fixedColor": "#E0A939",
                                    "mode": "fixed"
                                }
                            }
                        ]
                    }
                ]
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_ecc_sbe_agg{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}}"
                }
            ]
        },
        {
            "id": 13,
            "title": "ECC Double-Bit Errors (Aggregate)",
            "description": "WHY: DBE are UNCORRECTABLE \u2014 data corruption occurred.\n\nMETRIC: gpu_ecc_dbe_agg \u2014 lifetime uncorrectable error count.\nACTION: > 0 = IMMEDIATE GPU REPLACEMENT. Workload results unreliable.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 8,
                "x": 8,
                "y": 10
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "DBE Count",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "fixedColor": "#C04040",
                                    "mode": "fixed"
                                }
                            }
                        ]
                    }
                ]
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_ecc_dbe_agg{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}}"
                }
            ]
        },
        {
            "id": 14,
            "title": "ECC Volatile (Since Last Reset)",
            "description": "WHY: Volatile counters reset on GPU reset \u2014 shows RECENT errors.\n\nMETRICS: gpu_ecc_sbe_vol + gpu_ecc_dbe_vol.\nSIGNIFICANCE: Helps determine if errors are ongoing or historical.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 8,
                "x": 16,
                "y": 10
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Errors",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_ecc_sbe_vol{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} SBE"
                },
                {
                    "refId": "B",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_ecc_dbe_vol{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} DBE"
                }
            ]
        },
        {
            "type": "row",
            "title": "Row Remapping Status",
            "collapsed": false,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 16
            },
            "id": 15,
            "panels": []
        },
        {
            "id": 16,
            "title": "Correctable Remapped Rows",
            "description": "WHY: HBM memory auto-repairs bad rows by remapping to spares.\n\nMETRIC: gpu_correctable_remapped_rows \u2014 how many rows were repaired.\nSIGNIFICANCE: Limited spare rows (~512). Approaching limit = replacement.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 8,
                "x": 0,
                "y": 17
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Remapped Rows",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_correctable_remapped_rows{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}}"
                }
            ]
        },
        {
            "id": 17,
            "title": "Uncorrectable Remapped Rows",
            "description": "WHY: Remapping could NOT fix the row \u2014 data at risk.\n\nMETRIC: gpu_uncorrectable_remapped_rows.\nACTION: > 0 = SCHEDULE GPU REPLACEMENT. Unreliable compute.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 8,
                "x": 8,
                "y": 17
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Rows",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "fixedColor": "#C04040",
                                    "mode": "fixed"
                                }
                            }
                        ]
                    }
                ]
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_uncorrectable_remapped_rows{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}}"
                }
            ]
        },
        {
            "id": 18,
            "title": "Row Remap Failure Flag",
            "description": "WHY: Spare rows EXHAUSTED \u2014 no more auto-repair possible.\n\nMETRIC: gpu_row_remap_failure \u2014 0/1 flag.\nACTION: == 1 \u2192 IMMEDIATE GPU REPLACEMENT. Cannot self-heal.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 8,
                "x": 16,
                "y": 17
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Failure (0/1)",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "fixedColor": "#C04040",
                                    "mode": "fixed"
                                }
                            }
                        ]
                    }
                ]
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_row_remap_failure{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}}"
                }
            ]
        },
        {
            "type": "row",
            "title": "GPU Temperature (per-GPU)",
            "collapsed": false,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 23
            },
            "id": 19,
            "panels": []
        },
        {
            "id": 20,
            "title": "GPU Core Temp (gpu0-gpu3)",
            "description": "WHY: Monitor GPU die temperature under load.\n\nMETRICS: gpu0_temperature .. gpu3_temperature.\nTHRESHOLDS: < 75\u00b0C = normal (liquid-cooled), > 83\u00b0C = throttle risk.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 12,
                "x": 0,
                "y": 24
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "celsius",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Temperature",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu0_temperature{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU0"
                },
                {
                    "refId": "B",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu1_temperature{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU1"
                },
                {
                    "refId": "C",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu2_temperature{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU2"
                },
                {
                    "refId": "D",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu3_temperature{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU3"
                }
            ]
        },
        {
            "id": 21,
            "title": "GPU Core Temp (gpu4-gpu7)",
            "description": "WHY: All 8 GPUs must stay within thermal envelope.\n\nMETRICS: gpu4_temperature .. gpu7_temperature.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 12,
                "x": 12,
                "y": 24
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "celsius",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Temperature",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu4_temperature{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU4"
                },
                {
                    "refId": "B",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu5_temperature{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU5"
                },
                {
                    "refId": "C",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu6_temperature{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU6"
                },
                {
                    "refId": "D",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu7_temperature{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU7"
                }
            ]
        },
        {
            "type": "row",
            "title": "HBM Memory Temperature",
            "collapsed": false,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 30
            },
            "id": 22,
            "panels": []
        },
        {
            "id": 23,
            "title": "HBM Temp (gpu0-gpu3)",
            "description": "WHY: HBM (High Bandwidth Memory) is thermally sensitive.\n\nMETRICS: gpu0_mem_temp .. gpu3_mem_temp.\nTHRESHOLDS: > 95\u00b0C = warning, > 105\u00b0C = CRITICAL (data corruption risk).",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 12,
                "x": 0,
                "y": 31
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "celsius",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "HBM Temp",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu0_mem_temp{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU0"
                },
                {
                    "refId": "B",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu1_mem_temp{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU1"
                },
                {
                    "refId": "C",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu2_mem_temp{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU2"
                },
                {
                    "refId": "D",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu3_mem_temp{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU3"
                }
            ]
        },
        {
            "id": 24,
            "title": "HBM Temp (gpu4-gpu7)",
            "description": "WHY: All 8 GPUs' HBM temperature must be monitored equally.\n\nMETRICS: gpu4_mem_temp .. gpu7_mem_temp.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 12,
                "x": 12,
                "y": 31
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "celsius",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "HBM Temp",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu4_mem_temp{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU4"
                },
                {
                    "refId": "B",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu5_mem_temp{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU5"
                },
                {
                    "refId": "C",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu6_mem_temp{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU6"
                },
                {
                    "refId": "D",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu7_mem_temp{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU7"
                }
            ]
        },
        {
            "type": "row",
            "title": "GPU Power & Throttle",
            "collapsed": false,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 37
            },
            "id": 25,
            "panels": []
        },
        {
            "id": 26,
            "title": "Per-GPU Power Draw",
            "description": "WHY: Each B200 GPU has 1000W TDP. Track actual vs budget.\n\nMETRICS: gpu0_power .. gpu7_power \u2014 individual GPU wattage.\nSIGNIFICANCE: Under-TDP during load = throttling. Near-TDP = healthy.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 12,
                "x": 0,
                "y": 38
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "watt",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Power",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu0_power{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU0"
                },
                {
                    "refId": "B",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu1_power{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU1"
                },
                {
                    "refId": "C",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu2_power{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU2"
                },
                {
                    "refId": "D",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu3_power{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU3"
                },
                {
                    "refId": "E",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu4_power{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU4"
                },
                {
                    "refId": "F",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu5_power{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU5"
                },
                {
                    "refId": "G",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu6_power{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU6"
                },
                {
                    "refId": "H",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu7_power{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU7"
                }
            ]
        },
        {
            "id": 27,
            "title": "GPU Throttle Events",
            "description": "WHY: Throttling = GPU forced to reduce clock speed. Performance loss.\n\nMETRICS: gpu0_throttle .. gpu7_throttle \u2014 0 = no throttle.\nACTION: Sustained > 0 = check cooling (CDU flow), power supply.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 12,
                "x": 12,
                "y": 38
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Throttle",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu0_throttle{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU0"
                },
                {
                    "refId": "B",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu1_throttle{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU1"
                },
                {
                    "refId": "C",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu2_throttle{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU2"
                },
                {
                    "refId": "D",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu3_throttle{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU3"
                },
                {
                    "refId": "E",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu4_throttle{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU4"
                },
                {
                    "refId": "F",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu5_throttle{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU5"
                },
                {
                    "refId": "G",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu6_throttle{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU6"
                },
                {
                    "refId": "H",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu7_throttle{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU7"
                }
            ]
        },
        {
            "type": "row",
            "title": "GPU Clock & Performance State",
            "collapsed": false,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 44
            },
            "id": 28,
            "panels": []
        },
        {
            "id": 29,
            "title": "GPU SM Clock Speed",
            "description": "WHY: SM clock determines GPU compute throughput.\n\nMETRICS: gpu0_clock .. gpu7_clock.\nSIGNIFICANCE: Lower-than-expected during load = power/thermal throttling.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 12,
                "x": 0,
                "y": 45
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Clock (MHz)",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu0_clock{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU0"
                },
                {
                    "refId": "B",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu1_clock{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU1"
                },
                {
                    "refId": "C",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu2_clock{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU2"
                },
                {
                    "refId": "D",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu3_clock{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU3"
                },
                {
                    "refId": "E",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu4_clock{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU4"
                },
                {
                    "refId": "F",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu5_clock{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU5"
                },
                {
                    "refId": "G",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu6_clock{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU6"
                },
                {
                    "refId": "H",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu7_clock{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU7"
                }
            ]
        },
        {
            "id": 30,
            "title": "GPU Performance State",
            "description": "WHY: P-state shows GPU power mode: P0 = max, P8 = idle.\n\nMETRICS: gpu0_perfstate .. gpu7_perfstate.\nSIGNIFICANCE: P0 during workload = healthy. Higher P-state = underperforming.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 12,
                "x": 12,
                "y": 45
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "PerfState",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu0_perfstate{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU0"
                },
                {
                    "refId": "B",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu1_perfstate{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU1"
                },
                {
                    "refId": "C",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu2_perfstate{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU2"
                },
                {
                    "refId": "D",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu3_perfstate{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU3"
                },
                {
                    "refId": "E",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu4_perfstate{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU4"
                },
                {
                    "refId": "F",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu5_perfstate{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU5"
                },
                {
                    "refId": "G",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu6_perfstate{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU6"
                },
                {
                    "refId": "H",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu7_perfstate{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} GPU7"
                }
            ]
        },
        {
            "type": "row",
            "title": "NVLink Health & Utilization",
            "collapsed": false,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 51
            },
            "id": 31,
            "panels": []
        },
        {
            "id": 32,
            "title": "GPU NVLink CRC Data Errors",
            "description": "WHY: CRC errors = data corruption on NVLink cables.\n\nMETRIC: gpu_nvlink_crc_data_errors.\nACTION: Rising = cable/connector degrading. Reseat or replace NVLink cable.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 8,
                "x": 0,
                "y": 52
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "CRC Errors",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_nvlink_crc_data_errors{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}}"
                }
            ]
        },
        {
            "id": 33,
            "title": "GPU NVLink CRC Flit Errors",
            "description": "WHY: Flit = smallest NVLink transfer unit. Flit errors = link noise.\n\nMETRIC: gpu_nvlink_crc_flit_errors.\nSIGNIFICANCE: Usually lower severity than data errors, but monitor trend.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 8,
                "x": 8,
                "y": 52
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Flit Errors",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_nvlink_crc_flit_errors{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}}"
                }
            ]
        },
        {
            "id": 34,
            "title": "GPU Utilization",
            "description": "WHY: Track compute usage per entity.\n\nMETRIC: gpu_utilization \u2014 SM activity %.\nTARGET: > 70% during active jobs.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 8,
                "x": 16,
                "y": 52
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "percent",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Utilization %",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_utilization{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}}"
                }
            ]
        },
        {
            "type": "row",
            "title": "Advanced GPU Diagnostics",
            "collapsed": false,
            "gridPos": {
                "h": 1,
                "w": 24,
                "x": 0,
                "y": 58
            },
            "id": 35,
            "panels": []
        },
        {
            "id": 36,
            "title": "GPU Fabric Status",
            "description": "WHY: Fabric status shows if GPU is included in NVLink domain.\n\nMETRIC: GPU_fabric_status \u2014 0 = in domain, > 0 = excluded.\nACTION: Excluded GPU = reduced multi-GPU performance. Check NVSwitch.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 6,
                "x": 0,
                "y": 59
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Status",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "GPU_fabric_status{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}}"
                }
            ]
        },
        {
            "id": 37,
            "title": "Thermal Violation",
            "description": "WHY: GPU exceeded thermal limit \u2014 clock throttled to cool down.\n\nMETRIC: GPU_thermal_violation \u2014 counter of thermal throttle events.\nACTION: Frequent = check CDU/cooling flow, ambient temperature.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 6,
                "x": 6,
                "y": 59
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Violations",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": [
                    {
                        "matcher": {
                            "id": "byFrameRefID",
                            "options": "A"
                        },
                        "properties": [
                            {
                                "id": "color",
                                "value": {
                                    "fixedColor": "#C04040",
                                    "mode": "fixed"
                                }
                            }
                        ]
                    }
                ]
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "GPU_thermal_violation{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}}"
                }
            ]
        },
        {
            "id": 38,
            "title": "Board Limit Violation",
            "description": "WHY: Board-level power or thermal limit exceeded \u2014 entire baseboard issue.\n\nMETRIC: gpu_board_limit_violation.\nSIGNIFICANCE: May indicate PSU degradation or chassis thermal issue.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 6,
                "x": 12,
                "y": 59
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Violations",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_board_limit_violation{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}}"
                }
            ]
        },
        {
            "id": 39,
            "title": "Sync Boost & Reliability Violations",
            "description": "WHY: Sync boost ensures all GPUs run at same clock. Violations = asymmetry.\n\nMETRICS: GPU_sync_boost_violation + gpu_reliability_violation.\nSIGNIFICANCE: Reliability violations = approaching hardware limit.",
            "type": "timeseries",
            "datasource": {
                "type": "prometheus",
                "uid": "${datasource}"
            },
            "gridPos": {
                "h": 6,
                "w": 6,
                "x": 18,
                "y": 59
            },
            "fieldConfig": {
                "defaults": {
                    "unit": "short",
                    "custom": {
                        "lineWidth": 2,
                        "fillOpacity": 10,
                        "gradientMode": "none",
                        "axisLabel": "Violations",
                        "drawStyle": "line",
                        "pointSize": 4,
                        "showPoints": "never",
                        "spanNulls": true
                    }
                },
                "overrides": []
            },
            "options": {
                "legend": {
                    "displayMode": "table",
                    "placement": "right",
                    "calcs": [
                        "min",
                        "max",
                        "mean",
                        "lastNotNull"
                    ],
                    "sortBy": "Last *",
                    "sortDesc": true
                },
                "tooltip": {
                    "mode": "multi",
                    "sort": "desc"
                }
            },
            "targets": [
                {
                    "refId": "A",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "GPU_sync_boost_violation{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} SyncBoost"
                },
                {
                    "refId": "B",
                    "datasource": {
                        "type": "prometheus",
                        "uid": "${datasource}"
                    },
                    "expr": "gpu_reliability_violation{entity=~\"$node\",cluster=~\"$cluster\"}",
                    "legendFormat": "{{entity}} Reliability"
                }
            ]
        }
    ],
    "links": [
        {
            "title": "00 Executive Fleet Overview",
            "type": "link",
            "icon": "dashboard",
            "url": "/d/bmaas-00-fleet-overview?orgId=1&var-datasource=${datasource}&var-node=${node}&var-cluster=${cluster}",
            "targetBlank": false
        },
        {
            "title": "01 GPU Health & Diagnostics",
            "type": "link",
            "icon": "dashboard",
            "url": "/d/bmaas-01-gpu-health?orgId=1&var-datasource=${datasource}&var-node=${node}&var-cluster=${cluster}",
            "targetBlank": false
        },
        {
            "title": "02 Infrastructure & Hardware",
            "type": "link",
            "icon": "dashboard",
            "url": "/d/bmaas-02-infra-health?orgId=1&var-datasource=${datasource}&var-node=${node}&var-cluster=${cluster}",
            "targetBlank": false
        },
        {
            "title": "03 Network Fabric",
            "type": "link",
            "icon": "dashboard",
            "url": "/d/bmaas-03-network-fabric?orgId=1&var-datasource=${datasource}&var-node=${node}&var-cluster=${cluster}",
            "targetBlank": false
        },
        {
            "title": "04 Workload & Jobs",
            "type": "link",
            "icon": "dashboard",
            "url": "/d/bmaas-04-workload-perf?orgId=1&var-datasource=${datasource}&var-node=${node}&var-cluster=${cluster}",
            "targetBlank": false
        }
    ]
}